{% import 'macros/form.html' as form %}

<div id="{{ field.field_name }}-repeater" class="repeating-field" data-field-type="input">

    <div data-repeater-list="{{ field.field_name }}">

        {% set values = h.get_multi_textarea_values(data[field.field_name]) or [] %}

        {% for value in values %}
            <div data-repeater-item class="row">
                <div class="col-xs-11">
                    {%
                        call form.input(
                            'item-' + field.field_name,
                            id='field-item-' + field.field_name,
                            label=h.scheming_language_text(field.label),
                            placeholder=h.scheming_language_text(field.form_placeholder),
                            attrs=dict({"class": "form-control"}, **(field.get('form_attrs', {}))),
                            is_required=h.scheming_field_required(field),
                            value=value,
                            error=errors[field.field_name]
                        )
                    %}
                    {% endcall %}
                </div>
                <div class="col-xs-1">
                    <label class="invisible">&nbsp;</label>
                    <input data-repeater-delete type="button" class="btn btn-sm btn-danger" value="-" title="Remove item" />
                </div>
            </div>
        {% endfor %}

    </div>
    <div class="row" align="center">
        <input data-repeater-create type="button" class="btn" value="+" />
    </div>
</div>

{% set visibility = [] if g.debug else ['hidden'] %}
{% set default_classes = field.classes if 'classes' in field else ['control-medium'] %}

{%
    call form.input(
        field.field_name,
        id='field-' + field.field_name,
        label=h.scheming_language_text(field.label),
        placeholder=h.scheming_language_text(field.form_placeholder),
        value=data[field.field_name],
        error=errors[field.field_name],
        classes=default_classes + visibility,
        attrs=dict({"class": "form-control"}, **(field.get('form_attrs', {}))),
        is_required=h.scheming_field_required(field)
    )
%}
    {%- snippet 'scheming/form_snippets/help_text.html', field=field -%}
{% endcall %}
